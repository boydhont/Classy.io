{"version":3,"file":"convert-mesh.js","names":["_meshToArrowTable","require","convertMesh","mesh","shape","options","convertMeshToColumnarTable","data","convertMeshToArrowTable","Error","concat","columns","_i","_Object$entries","Object","entries","attributes","length","_Object$entries$_i","_slicedToArray2","default","columnName","attribute","value","schema"],"sources":["../../../../src/category/mesh/convert-mesh.ts"],"sourcesContent":["import type {Mesh} from './mesh-types';\nimport type {ColumnarTable, ArrowTable} from '../table/table-types';\nimport {convertMeshToArrowTable} from './mesh-to-arrow-table';\n\ntype TargetShape = 'mesh' | 'columnar-table' | 'arrow-table';\n\n/**\n * Convert a mesh to a specific shape\n */\nexport function convertMesh(\n  mesh: Mesh,\n  shape: TargetShape,\n  options?: any\n): Mesh | ColumnarTable | ArrowTable {\n  switch (shape || 'mesh') {\n    case 'mesh':\n      return mesh;\n    case 'columnar-table':\n      return convertMeshToColumnarTable(mesh);\n    case 'arrow-table':\n      return {\n        shape: 'arrow-table',\n        data: convertMeshToArrowTable(mesh)\n      };\n    default:\n      throw new Error(`Unsupported shape ${options?.shape}`);\n  }\n}\n\n/**\n * Convert a loaders.gl Mesh to a Columnar Table\n * @param mesh\n * @returns\n */\nexport function convertMeshToColumnarTable(mesh: Mesh): ColumnarTable {\n  const columns = {};\n\n  for (const [columnName, attribute] of Object.entries(mesh.attributes)) {\n    columns[columnName] = attribute.value;\n  }\n\n  return {\n    shape: 'columnar-table',\n    schema: mesh.schema,\n    data: columns\n  };\n}\n"],"mappings":";;;;;;;;;AAEA,IAAAA,iBAAA,GAAAC,OAAA;AAOO,SAASC,WAAWA,CACzBC,IAAU,EACVC,KAAkB,EAClBC,OAAa,EACsB;EACnC,QAAQD,KAAK,IAAI,MAAM;IACrB,KAAK,MAAM;MACT,OAAOD,IAAI;IACb,KAAK,gBAAgB;MACnB,OAAOG,0BAA0B,CAACH,IAAI,CAAC;IACzC,KAAK,aAAa;MAChB,OAAO;QACLC,KAAK,EAAE,aAAa;QACpBG,IAAI,EAAE,IAAAC,yCAAuB,EAACL,IAAI;MACpC,CAAC;IACH;MACE,MAAM,IAAIM,KAAK,sBAAAC,MAAA,CAAsBL,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAED,KAAK,CAAE,CAAC;EAC1D;AACF;AAOO,SAASE,0BAA0BA,CAACH,IAAU,EAAiB;EACpE,IAAMQ,OAAO,GAAG,CAAC,CAAC;EAElB,SAAAC,EAAA,MAAAC,eAAA,GAAsCC,MAAM,CAACC,OAAO,CAACZ,IAAI,CAACa,UAAU,CAAC,EAAAJ,EAAA,GAAAC,eAAA,CAAAI,MAAA,EAAAL,EAAA,IAAE;IAAlE,IAAAM,kBAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAP,eAAA,CAAAD,EAAA;MAAOS,UAAU,GAAAH,kBAAA;MAAEI,SAAS,GAAAJ,kBAAA;IAC/BP,OAAO,CAACU,UAAU,CAAC,GAAGC,SAAS,CAACC,KAAK;EACvC;EAEA,OAAO;IACLnB,KAAK,EAAE,gBAAgB;IACvBoB,MAAM,EAAErB,IAAI,CAACqB,MAAM;IACnBjB,IAAI,EAAEI;EACR,CAAC;AACH"}