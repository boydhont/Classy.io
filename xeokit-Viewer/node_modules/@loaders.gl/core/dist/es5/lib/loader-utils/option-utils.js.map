{"version":3,"file":"option-utils.js","names":["_isType","require","_loggers","_optionDefaults","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","getGlobalLoaderState","globalThis","loaders","_state","getGlobalLoaderOptions","state","globalOptions","DEFAULT_LOADER_OPTIONS","exports","setGlobalOptions","options","normalizeOptionsInternal","normalizeOptions","loader","url","validateOptions","validateOptionsObject","REMOVED_LOADER_OPTIONS","_iterator","_step","idOptions","id","loaderOptions","deprecatedOptions","defaultOptions","loaderName","prefix","concat","isSubOptions","isObject","isBaseUriOption","isWorkerUrlOption","probeLog","warn","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","toLowerCase","bestSuggestion","_iterator2","_step2","lowerCaseKey","isPartialMatch","startsWith","loaderDefaultOptions","mergedOptions","addUrlOptions","log","NullLog","mergeNestedFields","isPureObject","baseUri"],"sources":["../../../../src/lib/loader-utils/option-utils.ts"],"sourcesContent":["// loaders.gl, MIT license\n\nimport type {Loader, LoaderOptions} from '@loaders.gl/loader-utils';\nimport {isPureObject, isObject} from '../../javascript-utils/is-type';\nimport {probeLog, NullLog} from './loggers';\nimport {DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS} from './option-defaults';\n\n/**\n * Global state for loaders.gl. Stored on `global.loaders._state`\n */\ntype GlobalLoaderState = {\n  loaderRegistry: Loader[];\n  globalOptions: LoaderOptions;\n};\n\n/**\n * Helper for safely accessing global loaders.gl variables\n * Wraps initialization of global variable in function to defeat overly aggressive tree-shakers\n */\nexport function getGlobalLoaderState(): GlobalLoaderState {\n  // @ts-ignore\n  globalThis.loaders = globalThis.loaders || {};\n  // @ts-ignore\n  const {loaders} = globalThis;\n\n  // Add _state object to keep separate from modules added to globalThis.loaders\n  loaders._state = loaders._state || {};\n  return loaders._state;\n}\n\n/**\n * Store global loader options on the global object to increase chances of cross loaders-version interoperability\n * NOTE: This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\n * @returns global loader options merged with default loader options\n */\nexport const getGlobalLoaderOptions = (): LoaderOptions => {\n  const state = getGlobalLoaderState();\n  // Ensure all default loader options from this library are mentioned\n  state.globalOptions = state.globalOptions || {...DEFAULT_LOADER_OPTIONS};\n  return state.globalOptions;\n};\n\n/**\n * Set global loader options\n * @param options\n */\nexport function setGlobalOptions(options: LoaderOptions): void {\n  const state = getGlobalLoaderState();\n  const globalOptions = getGlobalLoaderOptions();\n  state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n}\n\n/**\n * Merges options with global opts and loader defaults, also injects baseUri\n * @param options\n * @param loader\n * @param loaders\n * @param url\n */\nexport function normalizeOptions(\n  options: LoaderOptions,\n  loader: Loader,\n  loaders?: Loader[],\n  url?: string\n): LoaderOptions {\n  loaders = loaders || [];\n  loaders = Array.isArray(loaders) ? loaders : [loaders];\n\n  validateOptions(options, loaders);\n  return normalizeOptionsInternal(loader, options, url);\n}\n\n// VALIDATE OPTIONS\n\n/**\n * Warn for unsupported options\n * @param options\n * @param loaders\n */\nfunction validateOptions(options: LoaderOptions, loaders: Loader[]) {\n  // Check top level options\n  validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n  for (const loader of loaders) {\n    // Get the scoped, loader specific options from the user supplied options\n    const idOptions = (options && options[loader.id]) || {};\n\n    // Get scoped, loader specific default and deprecated options from the selected loader\n    const loaderOptions = (loader.options && loader.options[loader.id]) || {};\n    const deprecatedOptions =\n      (loader.deprecatedOptions && loader.deprecatedOptions[loader.id]) || {};\n\n    // Validate loader specific options\n    validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n  }\n}\n\n// eslint-disable-next-line max-params, complexity\nfunction validateOptionsObject(\n  options,\n  id: string | null,\n  defaultOptions,\n  deprecatedOptions,\n  loaders: Loader[]\n) {\n  const loaderName = id || 'Top level';\n  const prefix = id ? `${id}.` : '';\n\n  for (const key in options) {\n    // If top level option value is an object it could options for a loader, so ignore\n    const isSubOptions = !id && isObject(options[key]);\n    const isBaseUriOption = key === 'baseUri' && !id;\n    const isWorkerUrlOption = key === 'workerUrl' && id;\n    // <loader>.workerUrl requires special handling as it is now auto-generated and no longer specified as a default option.\n    if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n      // Issue deprecation warnings\n      if (key in deprecatedOptions) {\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`\n        )();\n      } else if (!isSubOptions) {\n        const suggestion = findSimilarOption(key, loaders);\n        probeLog.warn(\n          `${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`\n        )();\n      }\n    }\n  }\n}\n\nfunction findSimilarOption(optionKey, loaders) {\n  const lowerCaseOptionKey = optionKey.toLowerCase();\n  let bestSuggestion = '';\n  for (const loader of loaders) {\n    for (const key in loader.options) {\n      if (optionKey === key) {\n        return `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n      const lowerCaseKey = key.toLowerCase();\n      const isPartialMatch =\n        lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n      if (isPartialMatch) {\n        bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n      }\n    }\n  }\n  return bestSuggestion;\n}\n\nfunction normalizeOptionsInternal(loader, options, url?: string) {\n  const loaderDefaultOptions = loader.options || {};\n\n  const mergedOptions = {...loaderDefaultOptions};\n\n  addUrlOptions(mergedOptions, url);\n\n  // LOGGING: options.log can be set to `null` to defeat logging\n  if (mergedOptions.log === null) {\n    mergedOptions.log = new NullLog();\n  }\n\n  mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n  mergeNestedFields(mergedOptions, options);\n\n  return mergedOptions;\n}\n\n// Merge nested options objects\nfunction mergeNestedFields(mergedOptions, options) {\n  for (const key in options) {\n    // Check for nested options\n    // object in options => either no key in defaultOptions or object in defaultOptions\n    if (key in options) {\n      const value = options[key];\n      if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n        mergedOptions[key] = {\n          ...mergedOptions[key],\n          ...options[key]\n        };\n      } else {\n        mergedOptions[key] = options[key];\n      }\n    }\n    // else: No need to merge nested opts, and the initial merge already copied over the nested options\n  }\n}\n\n/**\n * Harvest information from the url\n * @deprecated This is mainly there to support a hack in the GLTFLoader\n * TODO - baseUri should be a directory, i.e. remove file component from baseUri\n * TODO - extract extension?\n * TODO - extract query parameters?\n * TODO - should these be injected on context instead of options?\n */\nfunction addUrlOptions(options, url?: string) {\n  if (url && !('baseUri' in options)) {\n    options.baseUri = url;\n  }\n}\n"],"mappings":"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"}