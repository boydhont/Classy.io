{"version":3,"file":"check-errors.js","names":["checkFetchResponseStatus","_x","_checkFetchResponseStatus","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","response","errorMessage","text","wrap","_callee$","_context","prev","next","ok","concat","status","statusText","sent","getErrorText","t0","Error","stop","checkFetchResponseStatusSync","matches","match","slice"],"sources":["../../../../src/lib/loader-utils/check-errors.ts"],"sourcesContent":["export async function checkFetchResponseStatus(response) {\n  if (!response.ok) {\n    let errorMessage = `fetch failed ${response.status} ${response.statusText}`;\n    try {\n      const text = await response.text();\n      if (text) {\n        errorMessage += `: ${getErrorText(text)}`;\n      }\n    } catch (error) {\n      // ignore error\n    }\n    throw new Error(errorMessage);\n  }\n}\n\nexport function checkFetchResponseStatusSync(response) {\n  if (!response.ok) {\n    throw new Error(`fetch failed ${response.status}`);\n  }\n}\n\nfunction getErrorText(text) {\n  // Look for HTML error texts\n  const matches = text.match('<pre>(.*)</pre>');\n  return matches ? matches[1] : ` ${text.slice(0, 10)}...`;\n}\n"],"mappings":";;;;;;;;;;SAAsBA,wBAAwBA,CAAAC,EAAA;EAAA,OAAAC,yBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,0BAAA;EAAAA,yBAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAAvC,SAAAC,QAAwCC,QAAQ;IAAA,IAAAC,YAAA,EAAAC,IAAA;IAAA,OAAAL,YAAA,CAAAD,OAAA,CAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,IAChDP,QAAQ,CAACQ,EAAE;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;UACVN,YAAY,mBAAAQ,MAAA,CAAmBT,QAAQ,CAACU,MAAM,OAAAD,MAAA,CAAIT,QAAQ,CAACW,UAAU;UAAAN,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAE,IAAA;UAAA,OAEpDP,QAAQ,CAACE,IAAI,CAAC,CAAC;QAAA;UAA5BA,IAAI,GAAAG,QAAA,CAAAO,IAAA;UACV,IAAIV,IAAI,EAAE;YACRD,YAAY,SAAAQ,MAAA,CAASI,YAAY,CAACX,IAAI,CAAC,CAAE;UAC3C;UAACG,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAS,EAAA,GAAAT,QAAA;QAAA;UAAA,MAIG,IAAIU,KAAK,CAACd,YAAY,CAAC;QAAA;QAAA;UAAA,OAAAI,QAAA,CAAAW,IAAA;MAAA;IAAA,GAAAjB,OAAA;EAAA,CAEhC;EAAA,OAAAP,yBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAEM,SAASuB,4BAA4BA,CAACjB,QAAQ,EAAE;EACrD,IAAI,CAACA,QAAQ,CAACQ,EAAE,EAAE;IAChB,MAAM,IAAIO,KAAK,iBAAAN,MAAA,CAAiBT,QAAQ,CAACU,MAAM,CAAE,CAAC;EACpD;AACF;AAEA,SAASG,YAAYA,CAACX,IAAI,EAAE;EAE1B,IAAMgB,OAAO,GAAGhB,IAAI,CAACiB,KAAK,CAAC,iBAAiB,CAAC;EAC7C,OAAOD,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC,OAAAT,MAAA,CAAOP,IAAI,CAACkB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,QAAK;AAC1D"}