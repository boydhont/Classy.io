{"version":3,"file":"fetch-file.js","names":["_loaderUtils","require","_responseUtils","fetchFile","_x","_x2","_fetchFile","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","url","options","fetchOptions","wrap","_callee$","_context","prev","next","resolvePath","fetch","abrupt","sent","makeResponse","stop"],"sources":["../../../../src/lib/fetch/fetch-file.ts"],"sourcesContent":["import {resolvePath} from '@loaders.gl/loader-utils';\nimport {makeResponse} from '../utils/response-utils';\n// import {getErrorMessageFromResponse} from './fetch-error-message';\n\n/**\n * fetch compatible function\n * Reads file data from:\n * - http/http urls\n * - data urls\n * - File/Blob objects\n * Leverages `@loaders.gl/polyfills` for Node.js support\n * Respects pathPrefix and file aliases\n */\nexport async function fetchFile(\n  url: string | Blob,\n  options?: RequestInit & {fetch?: RequestInit | Function}\n): Promise<Response> {\n  if (typeof url === 'string') {\n    url = resolvePath(url);\n\n    let fetchOptions: RequestInit = options as RequestInit;\n    if (options?.fetch && typeof options?.fetch !== 'function') {\n      fetchOptions = options.fetch;\n    }\n\n    return await fetch(url, fetchOptions);\n  }\n\n  return await makeResponse(url);\n}\n"],"mappings":";;;;;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AAAqD,SAY/BE,SAASA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,UAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,WAAA;EAAAA,UAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAAxB,SAAAC,QACLC,GAAkB,EAClBC,OAAwD;IAAA,IAAAC,YAAA;IAAA,OAAAL,YAAA,CAAAD,OAAA,CAAAO,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,MAEpD,OAAOP,GAAG,KAAK,QAAQ;YAAAK,QAAA,CAAAE,IAAA;YAAA;UAAA;UACzBP,GAAG,GAAG,IAAAQ,wBAAW,EAACR,GAAG,CAAC;UAElBE,YAAyB,GAAGD,OAAO;UACvC,IAAIA,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEQ,KAAK,IAAI,QAAOR,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEQ,KAAK,MAAK,UAAU,EAAE;YAC1DP,YAAY,GAAGD,OAAO,CAACQ,KAAK;UAC9B;UAACJ,QAAA,CAAAE,IAAA;UAAA,OAEYE,KAAK,CAACT,GAAG,EAAEE,YAAY,CAAC;QAAA;UAAA,OAAAG,QAAA,CAAAK,MAAA,WAAAL,QAAA,CAAAM,IAAA;QAAA;UAAAN,QAAA,CAAAE,IAAA;UAAA,OAG1B,IAAAK,2BAAY,EAACZ,GAAG,CAAC;QAAA;UAAA,OAAAK,QAAA,CAAAK,MAAA,WAAAL,QAAA,CAAAM,IAAA;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAQ,IAAA;MAAA;IAAA,GAAAd,OAAA;EAAA,CAC/B;EAAA,OAAAP,UAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}