{"version":3,"file":"read-array-buffer.js","names":["readArrayBuffer","_x","_x2","_x3","_readArrayBuffer","apply","arguments","_asyncToGenerator2","default","_regenerator","mark","_callee","file","start","length","slice","wrap","_callee$","_context","prev","next","Blob","arrayBuffer","abrupt","sent","read","stop"],"sources":["../../../../src/lib/filesystems/read-array-buffer.ts"],"sourcesContent":["// Random-Access read\n\nexport async function readArrayBuffer(\n  file: Blob | ArrayBuffer | any,\n  start: number,\n  length: number\n): Promise<ArrayBuffer> {\n  if (file instanceof Blob) {\n    const slice = file.slice(start, start + length);\n    return await slice.arrayBuffer();\n  }\n  return await file.read(start, start + length);\n}\n\n/**\n * Read a slice of a Blob or File, without loading the entire file into memory\n * The trick when reading File objects is to read successive \"slices\" of the File\n * Per spec https://w3c.github.io/FileAPI/, slicing a File only updates the start and end fields\n * Actually reading from file happens in `readAsArrayBuffer`\n * @param blob to read\n export async function readBlob(blob: Blob): Promise<ArrayBuffer> {\n  return await new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = (event: ProgressEvent<FileReader>) =>\n      resolve(event?.target?.result as ArrayBuffer);\n    // TODO - reject with a proper Error\n    fileReader.onerror = (error: ProgressEvent<FileReader>) => reject(error);\n    fileReader.readAsArrayBuffer(blob);\n  });\n}\n*/\n"],"mappings":";;;;;;;;;SAEsBA,eAAeA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,gBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,iBAAA;EAAAA,gBAAA,OAAAG,kBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAA9B,SAAAC,QACLC,IAA8B,EAC9BC,KAAa,EACbC,MAAc;IAAA,IAAAC,KAAA;IAAA,OAAAN,YAAA,CAAAD,OAAA,CAAAQ,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAA,MAEVR,IAAI,YAAYS,IAAI;YAAAH,QAAA,CAAAE,IAAA;YAAA;UAAA;UAChBL,KAAK,GAAGH,IAAI,CAACG,KAAK,CAACF,KAAK,EAAEA,KAAK,GAAGC,MAAM,CAAC;UAAAI,QAAA,CAAAE,IAAA;UAAA,OAClCL,KAAK,CAACO,WAAW,CAAC,CAAC;QAAA;UAAA,OAAAJ,QAAA,CAAAK,MAAA,WAAAL,QAAA,CAAAM,IAAA;QAAA;UAAAN,QAAA,CAAAE,IAAA;UAAA,OAErBR,IAAI,CAACa,IAAI,CAACZ,KAAK,EAAEA,KAAK,GAAGC,MAAM,CAAC;QAAA;UAAA,OAAAI,QAAA,CAAAK,MAAA,WAAAL,QAAA,CAAAM,IAAA;QAAA;QAAA;UAAA,OAAAN,QAAA,CAAAQ,IAAA;MAAA;IAAA,GAAAf,OAAA;EAAA,CAC9C;EAAA,OAAAP,gBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}