{"version":3,"file":"timed-batch-iterator.js","names":["timedBatchIterator","_x","_x2","_timedBatchIterator","apply","arguments","_wrapAsyncGenerator2","default","_regenerator","mark","_callee","batchIterator","timeout","start","batches","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_step","batch","wrap","_callee$","_context","prev","next","Date","now","_asyncIterator","_awaitAsyncGenerator2","sent","done","value","push","t0","return","finish","stop"],"sources":["../../../../src/iterators/batch-iterators/timed-batch-iterator.ts"],"sourcesContent":["/**\n * \"Debounces\" batches and returns them in groups\n */\nexport async function* timedBatchIterator<Batch>(batchIterator: AsyncIterable<Batch>, timeout) {\n  let start = Date.now();\n  let batches: Batch[] = [];\n  for await (const batch of batchIterator) {\n    batches.push(batch);\n    if (Date.now() - start > timeout) {\n      yield batches;\n      start = Date.now();\n      batches = [];\n    }\n  }\n\n  if (batches) {\n    yield batches;\n  }\n}\n"],"mappings":";;;;;;;;;;;;SAGuBA,kBAAkBA,CAAAC,EAAA,EAAAC,GAAA;EAAA,OAAAC,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,oBAAA;EAAAA,mBAAA,OAAAG,oBAAA,CAAAC,OAAA,EAAAC,YAAA,CAAAD,OAAA,CAAAE,IAAA,CAAlC,SAAAC,QAA0CC,aAAmC,EAAEC,OAAO;IAAA,IAAAC,KAAA,EAAAC,OAAA,EAAAC,yBAAA,EAAAC,iBAAA,EAAAC,cAAA,EAAAC,SAAA,EAAAC,KAAA,EAAAC,KAAA;IAAA,OAAAZ,YAAA,CAAAD,OAAA,CAAAc,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UACvFZ,KAAK,GAAGa,IAAI,CAACC,GAAG,CAAC,CAAC;UAClBb,OAAgB,GAAG,EAAE;UAAAC,yBAAA;UAAAC,iBAAA;UAAAO,QAAA,CAAAC,IAAA;UAAAN,SAAA,GAAAU,cAAA,CACCjB,aAAa;QAAA;UAAAY,QAAA,CAAAE,IAAA;UAAA,WAAAI,qBAAA,CAAAtB,OAAA,EAAAW,SAAA,CAAAO,IAAA;QAAA;UAAA,MAAAV,yBAAA,KAAAI,KAAA,GAAAI,QAAA,CAAAO,IAAA,EAAAC,IAAA;YAAAR,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAtBL,KAAK,GAAAD,KAAA,CAAAa,KAAA;UACpBlB,OAAO,CAACmB,IAAI,CAACb,KAAK,CAAC;UAAC,MAChBM,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGd,KAAK,GAAGD,OAAO;YAAAW,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAAF,QAAA,CAAAE,IAAA;UAC9B,OAAMX,OAAO;QAAA;UACbD,KAAK,GAAGa,IAAI,CAACC,GAAG,CAAC,CAAC;UAClBb,OAAO,GAAG,EAAE;QAAC;UAAAC,yBAAA;UAAAQ,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA;QAAA;UAAAF,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAW,EAAA,GAAAX,QAAA;UAAAP,iBAAA;UAAAC,cAAA,GAAAM,QAAA,CAAAW,EAAA;QAAA;UAAAX,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAC,IAAA;UAAA,MAAAT,yBAAA,IAAAG,SAAA,CAAAiB,MAAA;YAAAZ,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAAF,QAAA,CAAAE,IAAA;UAAA,WAAAI,qBAAA,CAAAtB,OAAA,EAAAW,SAAA,CAAAiB,MAAA;QAAA;UAAAZ,QAAA,CAAAC,IAAA;UAAA,KAAAR,iBAAA;YAAAO,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAA,MAAAR,cAAA;QAAA;UAAA,OAAAM,QAAA,CAAAa,MAAA;QAAA;UAAA,OAAAb,QAAA,CAAAa,MAAA;QAAA;UAAA,KAIbtB,OAAO;YAAAS,QAAA,CAAAE,IAAA;YAAA;UAAA;UAAAF,QAAA,CAAAE,IAAA;UACT,OAAMX,OAAO;QAAA;QAAA;UAAA,OAAAS,QAAA,CAAAc,IAAA;MAAA;IAAA,GAAA3B,OAAA;EAAA,CAEhB;EAAA,OAAAP,mBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"}